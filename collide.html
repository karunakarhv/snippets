<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<title>Collide</title>
<style>
html, body {
    height : 100%;
    background-color: black;
}


</style>
<script type="text/javascript">

function Circle(xPos, yPos, radius, xVelocity, yVelocity) {
    this.x = xPos;
    this.y = yPos;
    this.r = radius;
    this.m = 2 * Math.PI * radius;
    this.xVel = xVelocity;
    this.yVel = yVelocity;
}

Circle.prototype.move = function(second) {
    this.x += this.xVel * second;
    this.y += this.yVel * second;
};

Circle.prototype.draw = function() {
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    context.strokeStyle = "black";
    context.beginPath();
    context.arc(this.x, this.y, this.r, 0, Math.PI * 2, true);
    context.stroke();
    context.closePath();
};

var numCircle = 5;
var width = 1000;
var height = 600;
var span = 50; 
var speedLimit = 20;

function random(low, high) {
    return low + Math.floor(Math.random() * (high - low));    
}

function genRandomCircles(nCircle) {
    var arrayCircle = [];
    for (var i = 0; i < nCircle; ++i) {
        var x = random(span, width - span);
        var y = random(span, height - span);
        var minDisToEdge = Math.min(x, y, width - x, height - y);
        var r = random(minDisToEdge / 2, minDisToEdge);
        var xVel = random(-speedLimit, speedLimit);
        var yVel = random(-speedLimit, speedLimit);
        arrayCircle.push(new Circle(x, y, r, xVel, yVel));
    }
    return arrayCircle;
}

function collideDetect(circles) {
    for (var i in circles) {
        var c = circles[i];
         if (c.x - c.r <= 0 || c.x + c.r >= width) {
            c.xVel = -c.xVel;
        }
        if (c.y - c.r <= 0 || c.y + c.r >= height) {
            c.yVel = -c.yVel;
        }
    }
    //TODO
}

function moveCircles(circles) {
    for (var i in circles) {
        circles[i].move(1);
    }
}
function drawCircles(circles) {
    for (var i in circles) {
        circles[i].draw();
    }
}

function clearCanvas() {
    var canvas = document.getElementById("canvas");
    var context = canvas.getContext("2d");
    context.clearRect(0, 0, canvas.width, canvas.height);
}

var arrayCircle = genRandomCircles(numCircle);

function run() {
    clearCanvas();
    moveCircles(arrayCircle);
    collideDetect(arrayCircle);
    drawCircles(arrayCircle);
}

window.onload = function () {
    var intervalTime = 50;
    setInterval(run, intervalTime);
}
</script>
</head>
<body>
    <canvas id="canvas" width="1000" height="600" style="background-color: white; ">
    </canvas>
</body>
</html>

